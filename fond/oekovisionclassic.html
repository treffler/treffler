<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ÖkoWorld ÖkoVision Classic Entwiklung</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        var currentValue;
        function calculateCurrenWorth() {
            var result, investment, fees;
            //console.log("currentValue: " + currentValue);
            investment = document.getElementById('investment').value;
            fees = investment * 0.05;
            //console.log(fees);
            //console.log(investment - fees);
            result = ((investment - fees)/219.91) * currentValue;
            document.getElementById('result').innerHTML = "Aktueller Wert: " + result.toFixed(2)+"€";
            document.getElementById('increase').innerHTML = "Gewinn: " + (result-investment).toFixed(2)+"€";

        }


        function getCurrentPrice() {
            const settings = {
                "async": true,
                "crossDomain": true,
                "url": "https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/v2/get-quotes?region=DE&symbols=OE7A.F",
                "method": "GET",
                "headers": {
                    "x-rapidapi-key": "620a665425msh47c1a91caca8c41p11f48bjsn8bc38d113262",
                    "x-rapidapi-host": "apidojo-yahoo-finance-v1.p.rapidapi.com"
                }
            };


            $.ajax(settings).done(function (response) {
                //console.log(response);
                //console.log(response.quoteResponse.result[0].regularMarketPrice);
                currentValue = response.quoteResponse.result[0].regularMarketPrice;
                document.getElementById('price').innerHTML = "Aktueller Preis: " + currentValue + "€";
                document.getElementById('test').setAttribute("style", "visibility: visible;");
            });
        }
    </script>
</head>
<body onload="getCurrentPrice()">
<div id="price">Aktueller Preis:</div>
<div id="test" style="visibility:hidden;">
<form id="investmentCal">
    <label for="investment">Betrag</label>
    <input type="number" id="investment" name="investment" placeholder="0" min="0" required>
    <button type="button" onclick="calculateCurrenWorth()">berechnen</button>
</form>
</div>
<div id="result"></div>
<div id="increase"></div>
</body>
</html>